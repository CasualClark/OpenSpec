# Task MCP HTTP Server - Development Environment Configuration
# This file contains development-friendly settings with debugging enabled

# ========================================
# Server Configuration
# ========================================
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# ========================================
# TLS Configuration (HTTPS)
# ========================================
# Enable TLS in development for testing
TLS_ENABLED=false
# TLS_KEY=./ssl/server.key
# TLS_CERT=./ssl/server.crt

# ========================================
# Authentication & Security
# ========================================
# Development tokens (easy to remember)
AUTH_TOKENS=dev-token-12345,test-token-67890,local-token-abcde

# Relaxed security for development
SECURITY_HEADERS_ENABLED=true
STRICT_TRANSPORT_SECURITY=false
RATE_LIMIT_BURST=100
RATE_LIMIT_WINDOW_MS=60000

# ========================================
# CORS Configuration
# ========================================
# Allow all origins in development
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:5173

# ========================================
# Rate Limiting
# ========================================
# More permissive rate limiting for development
RATE_LIMIT=120

# Disable distributed rate limiting in development
ENABLE_DISTRIBUTED_RATE_LIMIT=false
# REDIS_URL=redis://localhost:6379

# ========================================
# SSE Configuration
# ========================================
# Faster heartbeat for development testing
HEARTBEAT_MS=10000

# Development connection limits
MAX_SSE_CONNECTIONS=50
SSE_CONNECTION_TIMEOUT=120000

# ========================================
# Response Limits
# ========================================
# Larger limits for development testing
MAX_RESPONSE_SIZE_KB=5120
MAX_REQUEST_SIZE_KB=1024

# ========================================
# Logging Configuration
# ========================================
# Verbose logging for development
LOG_LEVEL=debug

# Human-readable logging for development
LOG_FORMAT=pretty

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=debug
AUDIT_LOG_FILE=./logs/audit.log

# Development log settings
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# ========================================
# Performance Configuration
# ========================================
# Single worker for development
WORKER_PROCESSES=1

# Development connection limits
MAX_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=65000
KEEPALIVE_REQUESTS=100

# Smaller buffer sizes for development
CLIENT_BODY_BUFFER_SIZE=8k
CLIENT_HEADER_BUFFER_SIZE=1k
LARGE_CLIENT_HEADER_BUFFERS=4 4k

# ========================================
# Health Check Configuration
# ========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=10000
HEALTH_CHECK_TIMEOUT=2000
HEALTH_CHECK_GRACE_PERIOD=5000

# ========================================
# Metrics & Monitoring
# ========================================
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Enable Prometheus metrics
PROMETHEUS_ENABLED=true

# ========================================
# Process Management
# ========================================
# PM2 configuration for development
PM2_INSTANCES=1
PM2_MAX_MEMORY_RESTART=512M
PM2_RESTART_DELAY=1000

# Faster graceful shutdown for development
GRACEFUL_SHUTDOWN_TIMEOUT=5000

# ========================================
# Content Security Policy
# ========================================
# Relaxed CSP for development
CSP_DEFAULT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https: http:
CSP_CONNECT_SRC='self' ws: wss:
CSP_FONT_SRC='self'
CSP_OBJECT_SRC='none'
CSP_MEDIA_SRC='self'
CSP_FRAME_SRC='self'

# ========================================
# Working Directory
# ========================================
WORKING_DIRECTORY=./

# ========================================
# Development-Specific Settings
# ========================================
# Hot reload and development tools
HOT_RELOAD=true
DEBUG_MODE=true
VERBOSE_ERRORS=true

# Development database (if applicable)
DATABASE_URL=sqlite:./data/dev.db
DATABASE_POOL_SIZE=5

# Local development services
EXTERNAL_API_URL=http://localhost:4000
WEBHOOK_SECRET=dev-webhook-secret

# Development feature flags
FEATURE_ADVANCED_METRICS=true
FEATURE_REQUEST_TRACING=true
FEATURE_RESPONSE_CACHING=false
FEATURE_DEBUG_ENDPOINTS=true

# ========================================
# Testing Configuration
# ========================================
# Test database
TEST_DATABASE_URL=sqlite:./data/test.db

# Mock services
MOCK_EXTERNAL_APIS=true
MOCK_AUTH=false

# Test timeouts
TEST_TIMEOUT=30000
INTEGRATION_TEST_TIMEOUT=60000

# ========================================
# Development Tools
# ========================================
# Enable debug endpoints
DEBUG_ENDPOINTS_ENABLED=true
PROFILING_ENABLED=true

# Development security (relaxed)
ALLOW_SELF_SIGNED_CERTS=true
SKIP_HOSTNAME_VERIFICATION=true

# ========================================
# IDE and Tooling
# ========================================
# Source maps for debugging
SOURCE_MAPS=true

# TypeScript compilation in watch mode
TS_WATCH_MODE=true

# ESLint and prettier
LINT_ON_SAVE=true
FORMAT_ON_SAVE=true