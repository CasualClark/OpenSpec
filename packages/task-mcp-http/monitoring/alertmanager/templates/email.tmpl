{{ define "email.warning" }}
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background-color: #f8f9fa; padding: 20px; border-left: 4px solid #ffc107; }
        .alert { margin: 20px 0; padding: 15px; border-left: 4px solid #ffc107; background-color: #fff3cd; }
        .labels { background-color: #f8f9fa; padding: 10px; margin: 10px 0; }
        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; }
        .resolved { background-color: #d4edda; border-left-color: #28a745; }
        .critical { border-left-color: #dc3545; background-color: #f8d7da; }
    </style>
</head>
<body>
    <div class="header">
        <h2>‚ö†Ô∏è Task MCP Warning Alert</h2>
        <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Service:</strong> Task MCP HTTP Server</p>
        <p><strong>Time:</strong> {{ .Alerts.Firing | len }} firing, {{ .Alerts.Resolved | len }} resolved</p>
    </div>

    {{ range .Alerts.Firing }}
    <div class="alert">
        <h3>{{ .Annotations.summary }}</h3>
        <p><strong>Description:</strong> {{ .Annotations.description }}</p>
        
        <div class="labels">
            <strong>Labels:</strong><br>
            {{ range .Labels.SortedPairs }}
            <code>{{ .Name }}: {{ .Value }}</code><br>
            {{ end }}
        </div>

        <p><strong>Started:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        {{ if .Annotations.dashboard_url }}
        <p><strong>Dashboard:</strong> <a href="{{ .Annotations.dashboard_url }}">View Dashboard</a></p>
        {{ end }}
        {{ if .Annotations.runbook_url }}
        <p><strong>Runbook:</strong> <a href="{{ .Annotations.runbook_url }}">View Runbook</a></p>
        {{ end }}
    </div>
    {{ end }}

    {{ range .Alerts.Resolved }}
    <div class="alert resolved">
        <h3>‚úÖ {{ .Annotations.summary }}</h3>
        <p><strong>Resolved:</strong> {{ .EndsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        <p><strong>Duration:</strong> {{ .EndsAt.Sub .StartsAt }}</p>
    </div>
    {{ end }}

    <div class="footer">
        <p>This alert was generated by AlertManager. If you believe this is a false positive, please contact the monitoring team.</p>
        <p>To manage alert preferences, visit the AlertManager UI.</p>
    </div>
</body>
</html>
{{ end }}

{{ define "email.infrastructure" }}
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background-color: #f8f9fa; padding: 20px; border-left: 4px solid #17a2b8; }
        .alert { margin: 20px 0; padding: 15px; border-left: 4px solid #17a2b8; background-color: #d1ecf1; }
        .metric { background-color: #e9ecef; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; }
    </style>
</head>
<body>
    <div class="header">
        <h2>üîß Task MCP Infrastructure Alert</h2>
        <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Service:</strong> Task MCP HTTP Server</p>
        <p><strong>Time:</strong> {{ .Alerts.Firing | len }} firing, {{ .Alerts.Resolved | len }} resolved</p>
    </div>

    {{ range .Alerts.Firing }}
    <div class="alert">
        <h3>{{ .Annotations.summary }}</h3>
        <p><strong>Description:</strong> {{ .Annotations.description }}</p>
        
        <div class="metric">
            <strong>Instance:</strong> {{ .Labels.instance }}<br>
            <strong>Component:</strong> {{ .Labels.component | default "Unknown" }}<br>
            <strong>Current Value:</strong> {{ .Value }}<br>
            <strong>Threshold:</strong> {{ .Labels.threshold }}
        </div>

        <p><strong>Started:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        {{ if .Annotations.dashboard_url }}
        <p><strong>Dashboard:</strong> <a href="{{ .Annotations.dashboard_url }}">View Dashboard</a></p>
        {{ end }}
    </div>
    {{ end }}

    {{ range .Alerts.Resolved }}
    <div class="alert" style="border-left-color: #28a745; background-color: #d4edda;">
        <h3>‚úÖ {{ .Annotations.summary }}</h3>
        <p><strong>Resolved:</strong> {{ .EndsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        <p><strong>Duration:</strong> {{ .EndsAt.Sub .StartsAt }}</p>
    </div>
    {{ end }}

    <div class="footer">
        <p>This infrastructure alert was generated by AlertManager.</p>
        <p>Infrastructure Team: infrastructure-team@company.com</p>
    </div>
</body>
</html>
{{ end }}

{{ define "email.security" }}
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background-color: #f8f9fa; padding: 20px; border-left: 4px solid #dc3545; }
        .alert { margin: 20px 0; padding: 15px; border-left: 4px solid #dc3545; background-color: #f8d7da; }
        .security-info { background-color: #fff3cd; padding: 10px; margin: 10px 0; border: 1px solid #ffeaa7; border-radius: 4px; }
        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; }
    </style>
</head>
<body>
    <div class="header">
        <h2>üîí Task MCP Security Alert</h2>
        <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Service:</strong> Task MCP HTTP Server</p>
        <p><strong>Priority:</strong> HIGH - Immediate attention required</p>
    </div>

    {{ range .Alerts.Firing }}
    <div class="alert">
        <h3>{{ .Annotations.summary }}</h3>
        <p><strong>Description:</strong> {{ .Annotations.description }}</p>
        
        <div class="security-info">
            <strong>Security Details:</strong><br>
            {{ if .Labels.source_ip }}<strong>Source IP:</strong> {{ .Labels.source_ip }}<br>{{ end }}
            {{ if .Labels.user }}<strong>User:</strong> {{ .Labels.user }}<br>{{ end }}
            {{ if .Labels.action }}<strong>Action:</strong> {{ .Labels.action }}<br>{{ end }}
            {{ if .Labels.reason }}<strong>Reason:</strong> {{ .Labels.reason }}<br>{{ end }}
        </div>

        <p><strong>Started:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        {{ if .Annotations.dashboard_url }}
        <p><strong>Dashboard:</strong> <a href="{{ .Annotations.dashboard_url }}">View Security Dashboard</a></p>
        {{ end }}
    </div>
    {{ end }}

    <div class="footer">
        <p><strong>Action Required:</strong> Please investigate this security alert immediately.</p>
        <p>Security Team: security-team@company.com</p>
        <p>Emergency Contact: security-emergency@company.com</p>
    </div>
</body>
</html>
{{ end }}

{{ define "email.business" }}
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background-color: #f8f9fa; padding: 20px; border-left: 4px solid #6f42c1; }
        .alert { margin: 20px 0; padding: 15px; border-left: 4px solid #6f42c1; background-color: #e7e3f4; }
        .business-metric { background-color: #f8f9fa; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .impact { background-color: #fff3cd; padding: 10px; margin: 10px 0; border-left: 4px solid #ffc107; }
        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; }
    </style>
</head>
<body>
    <div class="header">
        <h2>üìä Task MCP Business Alert</h2>
        <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Service:</strong> Task MCP HTTP Server</p>
        <p><strong>Business Impact:</strong> {{ .Labels.impact | default "Medium" }}</p>
    </div>

    {{ range .Alerts.Firing }}
    <div class="alert">
        <h3>{{ .Annotations.summary }}</h3>
        <p><strong>Description:</strong> {{ .Annotations.description }}</p>
        
        <div class="business-metric">
            <strong>Business Metrics:</strong><br>
            {{ if .Labels.metric }}<strong>Metric:</strong> {{ .Labels.metric }}<br>{{ end }}
            {{ if .Labels.current_value }}<strong>Current Value:</strong> {{ .Labels.current_value }}<br>{{ end }}
            {{ if .Labels.expected_value }}<strong>Expected Value:</strong> {{ .Labels.expected_value }}<br>{{ end }}
            <strong>Deviation:</strong> {{ .Value | humanizePercentage }}
        </div>

        {{ if .Labels.impact }}
        <div class="impact">
            <strong>Impact Assessment:</strong> {{ .Labels.impact }}
        </div>
        {{ end }}

        <p><strong>Started:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        {{ if .Annotations.dashboard_url }}
        <p><strong>Dashboard:</strong> <a href="{{ .Annotations.dashboard_url }}">View Business Dashboard</a></p>
        {{ end }}
    </div>
    {{ end }}

    <div class="footer">
        <p>This business alert was generated by AlertManager.</p>
        <p>Product Team: product-team@company.com</p>
    </div>
</body>
</html>
{{ end }}

{{ define "email.slo" }}
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .header { background-color: #f8f9fa; padding: 20px; border-left: 4px solid #fd7e14; }
        .alert { margin: 20px 0; padding: 15px; border-left: 4px solid #fd7e14; background-color: #fff3cd; }
        .slo-info { background-color: #e9ecef; padding: 15px; margin: 10px 0; border-radius: 4px; }
        .burn-rate { background-color: #f8d7da; padding: 10px; margin: 10px 0; border-left: 4px solid #dc3545; }
        .footer { margin-top: 30px; padding-top: 20px; border-top: 1px solid #dee2e6; font-size: 12px; color: #6c757d; }
    </style>
</head>
<body>
    <div class="header">
        <h2>üìà Task MCP SLO Alert</h2>
        <p><strong>Alert:</strong> {{ .GroupLabels.alertname }}</p>
        <p><strong>Service:</strong> Task MCP HTTP Server</p>
        <p><strong>SLO Category:</strong> {{ .Labels.slo }}</p>
    </div>

    {{ range .Alerts.Firing }}
    <div class="alert">
        <h3>{{ .Annotations.summary }}</h3>
        <p><strong>Description:</strong> {{ .Annotations.description }}</p>
        
        <div class="slo-info">
            <strong>SLO Information:</strong><br>
            <strong>SLO:</strong> {{ .Labels.slo }}<br>
            <strong>Burn Rate:</strong> {{ .Labels.burn_rate }}<br>
            <strong>Error Budget Consumption:</strong> {{ .Value | humanizePercentage }}<br>
            <strong>Measurement Period:</strong> {{ .Labels.period | default "24 hours" }}
        </div>

        <div class="burn-rate">
            <strong>‚ö†Ô∏è Error Budget Burn Rate</strong><br>
            At this rate, the monthly error budget will be exhausted in less than {{ .Labels.time_to_exhaustion | default "24 hours" }}.
        </div>

        <p><strong>Started:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}</p>
        {{ if .Annotations.dashboard_url }}
        <p><strong>Dashboard:</strong> <a href="{{ .Annotations.dashboard_url }}">View SLO Dashboard</a></p>
        {{ end }}
        {{ if .Annotations.runbook_url }}
        <p><strong>Runbook:</strong> <a href="{{ .Annotations.runbook_url }}">View SLO Runbook</a></p>
        {{ end }}
    </div>
    {{ end }}

    <div class="footer">
        <p>This SLO alert was generated by AlertManager.</p>
        <p>SRE Team: sre-team@company.com</p>
        <p>SLO Documentation: <a href="https://docs.company.com/slos">View SLO Documentation</a></p>
    </div>
</body>
</html>
{{ end }}